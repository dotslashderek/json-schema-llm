{
  "$comment": "https://spec.openapis.org/arazzo/v1.0#specification-extensions",
  "additionalProperties": false,
  "description": "The description of Arazzo v1.0.x documents",
  "properties": {
    "arazzo": {
      "description": "The version number of the Arazzo Specification",
      "pattern": "^1\\.0\\.\\d+(-.+)?$",
      "type": "string"
    },
    "components": {
      "anyOf": [
        {
          "$comment": "https://spec.openapis.org/arazzo/v1.0#components-object",
          "additionalProperties": false,
          "description": "Holds a set of reusable objects for different aspects of the Arazzo Specification",
          "properties": {
            "failureActions": {
              "anyOf": [
                {
                  "description": "An object to hold reusable Failure Actions Objects",
                  "items": {
                    "additionalProperties": false,
                    "properties": {
                      "key": {
                        "type": "string"
                      },
                      "value": {
                        "$comment": "https://spec.openapis.org/arazzo/v1.0#failure-action-object",
                        "additionalProperties": false,
                        "description": "A single failure action which describes an action to take upon failure of a workflow step",
                        "properties": {
                          "criteria": {
                            "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          "name": {
                            "description": "The name of the failure action",
                            "type": "string"
                          },
                          "retryAfter": {
                            "anyOf": [
                              {
                                "description": "A non-negative decimal indicating the seconds to delay after the step failure before another attempt SHALL be made. Constraints: minimum value: 0.",
                                "type": "number"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "retryLimit": {
                            "anyOf": [
                              {
                                "description": "A non-negative integer indicating how many attempts to retry the step MAY be attempted before failing the overall step. Constraints: minimum value: 0.",
                                "type": "integer"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "stepId": {
                            "anyOf": [
                              {
                                "description": "MUST be a valid JSON value serialized as a string. This represents a #stepId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "type": {
                            "description": "MUST be a valid JSON value serialized as a string. Structure: One of: [\"end\", \"goto\", \"retry\"]. Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          "workflowId": {
                            "anyOf": [
                              {
                                "description": "MUST be a valid JSON value serialized as a string. This represents a #workflowId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          }
                        },
                        "required": [
                          "criteria",
                          "name",
                          "retryAfter",
                          "retryLimit",
                          "stepId",
                          "type",
                          "workflowId"
                        ],
                        "type": "object"
                      }
                    },
                    "required": [
                      "key",
                      "value"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ]
            },
            "inputs": {
              "anyOf": [
                {
                  "description": "An object to hold reusable JSON Schema 2020-12 schemas to be referenced from workflow inputs",
                  "items": {
                    "additionalProperties": false,
                    "properties": {
                      "key": {
                        "type": "string"
                      },
                      "value": {
                        "description": "MUST be a valid JSON value serialized as a string. This represents a schema reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                        "type": "string"
                      }
                    },
                    "required": [
                      "key",
                      "value"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ]
            },
            "parameters": {
              "anyOf": [
                {
                  "description": "An object to hold reusable Parameter Objects",
                  "items": {
                    "additionalProperties": false,
                    "properties": {
                      "key": {
                        "type": "string"
                      },
                      "value": {
                        "$comment": "https://spec.openapis.org/arazzo/v1.0#parameter-object",
                        "additionalProperties": false,
                        "description": "Describes a single step parameter",
                        "properties": {
                          "in": {
                            "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          "name": {
                            "description": "The name of the parameter",
                            "type": "string"
                          },
                          "value": {
                            "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          }
                        },
                        "required": [
                          "in",
                          "name",
                          "value"
                        ],
                        "type": "object"
                      }
                    },
                    "required": [
                      "key",
                      "value"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ]
            },
            "successActions": {
              "anyOf": [
                {
                  "description": "An object to hold reusable Success Actions Objects",
                  "items": {
                    "additionalProperties": false,
                    "properties": {
                      "key": {
                        "type": "string"
                      },
                      "value": {
                        "$comment": "https://spec.openapis.org/arazzo/v1.0#success-action-object",
                        "additionalProperties": false,
                        "description": "A single success action which describes an action to take upon success of a workflow step",
                        "properties": {
                          "criteria": {
                            "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          "name": {
                            "description": "The name of the success action",
                            "type": "string"
                          },
                          "stepId": {
                            "anyOf": [
                              {
                                "description": "MUST be a valid JSON value serialized as a string. This represents a #stepId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "type": {
                            "description": "MUST be a valid JSON value serialized as a string. Structure: One of: [\"end\", \"goto\"]. Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          "workflowId": {
                            "anyOf": [
                              {
                                "description": "MUST be a valid JSON value serialized as a string. This represents a #workflowId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          }
                        },
                        "required": [
                          "criteria",
                          "name",
                          "stepId",
                          "type",
                          "workflowId"
                        ],
                        "type": "object"
                      }
                    },
                    "required": [
                      "key",
                      "value"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ]
            }
          },
          "required": [
            "failureActions",
            "inputs",
            "parameters",
            "successActions"
          ],
          "type": "object"
        },
        {
          "type": "null"
        }
      ]
    },
    "info": {
      "$comment": "https://spec.openapis.org/arazzo/v1.0#info-object",
      "additionalProperties": false,
      "description": "Provides metadata about the Arazzo description",
      "properties": {
        "description": {
          "anyOf": [
            {
              "description": "A description of the purpose of the workflows defined. CommonMark syntax MAY be used for rich text representation",
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "summary": {
          "anyOf": [
            {
              "description": "A short summary of the Arazzo Description",
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "title": {
          "description": "A human readable title of the Arazzo Description",
          "type": "string"
        },
        "version": {
          "description": "The version identifier of the Arazzo document (which is distinct from the Arazzo Specification version)",
          "type": "string"
        }
      },
      "required": [
        "description",
        "summary",
        "title",
        "version"
      ],
      "type": "object"
    },
    "sourceDescriptions": {
      "description": "A list of source descriptions such as Arazzo or OpenAPI. Constraints: items must be unique; minimum 1 item(s).",
      "items": {
        "$comment": "https://spec.openapis.org/arazzo/v1.0#source-description-object",
        "additionalProperties": false,
        "description": "Describes a source description (such as an OpenAPI description) that will be referenced by one or more workflows described within an Arazzo description",
        "properties": {
          "name": {
            "description": "A unique name for the source description",
            "pattern": "^[A-Za-z0-9_\\-]+$",
            "type": "string"
          },
          "type": {
            "anyOf": [
              {
                "description": "The type of source description",
                "enum": [
                  "arazzo",
                  "openapi"
                ]
              },
              {
                "type": "null"
              }
            ]
          },
          "url": {
            "description": "A URL to a source description to be used by a workflow. Constraints: format: uri-reference.",
            "type": "string"
          }
        },
        "required": [
          "name",
          "type",
          "url"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "workflows": {
      "description": "A list of workflows. Constraints: items must be unique; minimum 1 item(s).",
      "items": {
        "$comment": "https://spec.openapis.org/arazzo/v1.0#workflow-object",
        "additionalProperties": false,
        "description": "Describes the steps to be taken across one or more APIs to achieve an objective",
        "properties": {
          "dependsOn": {
            "anyOf": [
              {
                "description": "A list of workflows that MUST be completed before this workflow can be processed. Constraints: items must be unique.",
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ]
          },
          "description": {
            "anyOf": [
              {
                "description": "A description of the workflow. CommonMark syntax MAY be used for rich text representation",
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "failureActions": {
            "anyOf": [
              {
                "description": "A list of failure actions that are applicable for all steps described under this workflow. Constraints: items must be unique.",
                "items": {
                  "anyOf": [
                    {
                      "$comment": "https://spec.openapis.org/arazzo/v1.0#failure-action-object",
                      "additionalProperties": false,
                      "description": "A single failure action which describes an action to take upon failure of a workflow step",
                      "properties": {
                        "criteria": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        },
                        "name": {
                          "description": "The name of the failure action",
                          "type": "string"
                        },
                        "retryAfter": {
                          "anyOf": [
                            {
                              "description": "A non-negative decimal indicating the seconds to delay after the step failure before another attempt SHALL be made. Constraints: minimum value: 0.",
                              "type": "number"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "retryLimit": {
                          "anyOf": [
                            {
                              "description": "A non-negative integer indicating how many attempts to retry the step MAY be attempted before failing the overall step. Constraints: minimum value: 0.",
                              "type": "integer"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "stepId": {
                          "anyOf": [
                            {
                              "description": "MUST be a valid JSON value serialized as a string. This represents a #stepId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "type": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: One of: [\"end\", \"goto\", \"retry\"]. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        },
                        "workflowId": {
                          "anyOf": [
                            {
                              "description": "MUST be a valid JSON value serialized as a string. This represents a #workflowId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": [
                        "criteria",
                        "name",
                        "retryAfter",
                        "retryLimit",
                        "stepId",
                        "type",
                        "workflowId"
                      ],
                      "type": "object"
                    },
                    {
                      "$comment": "https://spec.openapis.org/arazzo/v1.0#reusable-object",
                      "additionalProperties": false,
                      "description": "A simple object to allow referencing of objects contained within the Components Object",
                      "properties": {
                        "reference": {
                          "description": "A runtime expression used to reference the desired object",
                          "type": "string"
                        },
                        "value": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        }
                      },
                      "required": [
                        "reference",
                        "value"
                      ],
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ]
          },
          "inputs": {
            "anyOf": [
              {
                "description": "A JSON Schema 2020-12 object representing the input parameters used by this workflow",
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "outputs": {
            "anyOf": [
              {
                "description": "MUST be a valid JSON value serialized as a string. Structure: {}. includes properties matching pattern(s) [^[a-zA-Z0-9\\.\\-_]+$]. Do NOT output plain text — the value must parse with JSON.parse().",
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "parameters": {
            "anyOf": [
              {
                "description": "A list of parameters that are applicable for all steps described under this workflow. Constraints: items must be unique.",
                "items": {
                  "anyOf": [
                    {
                      "$comment": "https://spec.openapis.org/arazzo/v1.0#parameter-object",
                      "additionalProperties": false,
                      "description": "Describes a single step parameter",
                      "properties": {
                        "in": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        },
                        "name": {
                          "description": "The name of the parameter",
                          "type": "string"
                        },
                        "value": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        }
                      },
                      "required": [
                        "in",
                        "name",
                        "value"
                      ],
                      "type": "object"
                    },
                    {
                      "$comment": "https://spec.openapis.org/arazzo/v1.0#reusable-object",
                      "additionalProperties": false,
                      "description": "A simple object to allow referencing of objects contained within the Components Object",
                      "properties": {
                        "reference": {
                          "description": "A runtime expression used to reference the desired object",
                          "type": "string"
                        },
                        "value": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        }
                      },
                      "required": [
                        "reference",
                        "value"
                      ],
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ]
          },
          "steps": {
            "description": "An ordered list of steps where each step represents a call to an API operation or to another workflow. Constraints: items must be unique; minimum 1 item(s).",
            "items": {
              "$comment": "https://spec.openapis.org/arazzo/v1.0#step-object'",
              "additionalProperties": false,
              "description": "Describes a single workflow step which MAY be a call to an API operation (OpenAPI Operation Object or another Workflow Object)\n\nNote: While properties may be nullable, a valid output MUST include a non-null value for at least one of these properties: operationId, operationPath, workflowId",
              "properties": {
                "description": {
                  "anyOf": [
                    {
                      "description": "A description of the step. CommonMark syntax MAY be used for rich text representation",
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "onFailure": {
                  "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                  "type": "string"
                },
                "onSuccess": {
                  "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                  "type": "string"
                },
                "operationId": {
                  "anyOf": [
                    {
                      "description": "The name of an existing, resolvable operation, as defined with a unique operationId and existing within one of the sourceDescriptions",
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "operationPath": {
                  "anyOf": [
                    {
                      "description": "A reference to a Source combined with a JSON Pointer to reference an operation",
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "outputs": {
                  "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                  "type": "string"
                },
                "parameters": {
                  "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                  "type": "string"
                },
                "requestBody": {
                  "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                  "type": "string"
                },
                "stepId": {
                  "description": "Unique string to represent the step",
                  "type": "string"
                },
                "successCriteria": {
                  "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                  "type": "string"
                },
                "workflowId": {
                  "anyOf": [
                    {
                      "description": "MUST be a valid JSON value serialized as a string. This represents a #workflowId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              },
              "required": [
                "description",
                "onFailure",
                "onSuccess",
                "operationId",
                "operationPath",
                "outputs",
                "parameters",
                "requestBody",
                "stepId",
                "successCriteria",
                "workflowId"
              ],
              "type": "object"
            },
            "type": "array"
          },
          "successActions": {
            "anyOf": [
              {
                "description": "A list of success actions that are applicable for all steps described under this workflow. Constraints: items must be unique.",
                "items": {
                  "anyOf": [
                    {
                      "$comment": "https://spec.openapis.org/arazzo/v1.0#success-action-object",
                      "additionalProperties": false,
                      "description": "A single success action which describes an action to take upon success of a workflow step",
                      "properties": {
                        "criteria": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        },
                        "name": {
                          "description": "The name of the success action",
                          "type": "string"
                        },
                        "stepId": {
                          "anyOf": [
                            {
                              "description": "MUST be a valid JSON value serialized as a string. This represents a #stepId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "type": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: One of: [\"end\", \"goto\"]. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        },
                        "workflowId": {
                          "anyOf": [
                            {
                              "description": "MUST be a valid JSON value serialized as a string. This represents a #workflowId reference that could not be resolved. Do NOT output plain text — the value must parse with JSON.parse().",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": [
                        "criteria",
                        "name",
                        "stepId",
                        "type",
                        "workflowId"
                      ],
                      "type": "object"
                    },
                    {
                      "$comment": "https://spec.openapis.org/arazzo/v1.0#reusable-object",
                      "additionalProperties": false,
                      "description": "A simple object to allow referencing of objects contained within the Components Object",
                      "properties": {
                        "reference": {
                          "description": "A runtime expression used to reference the desired object",
                          "type": "string"
                        },
                        "value": {
                          "description": "MUST be a valid JSON value serialized as a string. Structure: any. Do NOT output plain text — the value must parse with JSON.parse().",
                          "type": "string"
                        }
                      },
                      "required": [
                        "reference",
                        "value"
                      ],
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ]
          },
          "summary": {
            "anyOf": [
              {
                "description": "A summary of the purpose or objective of the workflow",
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "workflowId": {
            "description": "Unique string to represent the workflow",
            "type": "string"
          }
        },
        "required": [
          "dependsOn",
          "description",
          "failureActions",
          "inputs",
          "outputs",
          "parameters",
          "steps",
          "successActions",
          "summary",
          "workflowId"
        ],
        "type": "object"
      },
      "type": "array"
    }
  },
  "required": [
    "arazzo",
    "components",
    "info",
    "sourceDescriptions",
    "workflows"
  ],
  "type": "object"
}
